<html>
<title>
  view tasks
</title>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <% include partials/navbar2.ejs %>
  <% if(prolist == undefined || prolist.task.length==0 ){ %>
    <h3>no quizes and assignments for now</h3>
  <% }else {%>
    <ul>
      <% prolist.task.sort((c,b) => (c.date > b.date) ? 1 : ((b.date > c.date) ? -1 : 0)); %>
      <% for(var i=0;i<prolist.task.length;i++){ %>
        <fieldset>
        <legend><h1><%= prolist.task[i].subject%></h1></legend>
        <% var date = new Date(); %>
        <% const monthNames = ["January", "February", "March", "April", "May", "June","July", "August", "September", "October", "November", "December"]; %>
        <% if(prolist.task[i].item === 'assignment'){ %>
          <embed src="file/<%=prolist.task[i].file%>#toolbar=0&navpanes=0&scrollbar=0"></embed>
          <a href="file/<%=prolist.task[i].file%>" target="_blank"><span class="glyphicon glyphicon-eye-open" aria-hidden="true">&nbsp;view</span></a> &nbsp;
          <a href="file/<%=prolist.task[i].file%>" download><span class="glyphicon glyphicon-download-alt" aria-hidden="true">&nbsp;view</span></a>
        <% } %>
        <li>
          <% if(date > (prolist.task[i].date)) {%>
          <p style="color:red;"><%= prolist.task[i].item %></p>
          <h4 style="color:red;">-- due date <%= prolist.task[i].date.getDate() %>th of <%= monthNames[prolist.task[i].date.getMonth()] %>,<%= prolist.task[i].date.getFullYear() %></h4>
          <% } else{%>
            <p style="color:green;"><%= prolist.task[i].item %></p>
            <h4 style="color:green;">-- due date <%= prolist.task[i].date.getDate() %>th of <%= monthNames[prolist.task[i].date.getMonth()] %>,<%= prolist.task[i].date.getFullYear() %></h4>
          <% } %>
        </li>
        </fieldset>
        <br>
      <% } %>
    </ul>
  <% } %>
</html>
